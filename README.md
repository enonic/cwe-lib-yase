# Explorer Library

## Getting the source

```sh
$ git clone git@github.com:enonic/lib-explorer.git && cd lib-explorer
```

or

```sh
$ git clone https://github.com/enonic/lib-explorer.git && cd lib-explorer
```

## Building

```sh
$ enonic project gradle clean build
```

## Testing

```sh
$ yarn run test
```

## Publishing

```sh
$ enonic project gradle clean build publishToMavenLocal --refresh-dependencies
```


## Include in an app

```build.gradle
dependencies {
	include 'com.enonic.lib:lib-explorer:4.0.0-B2'
}
```

## Compatibility

| App version | XP version |
| ----------- | ---------- |
| 4.0.0-B5 | 7.10.2 |
| 3.19.0 | 7.7.1 |
| 3.1[7-8].0 | 7.7.0 |
| 3.16.0 | 7.6.0 |
| 3.1[0-5].x | 7.5.0 |
| 3.[6-9].x | 7.4.1 |
| 3.[1-5].x | 7.3.2 |
| 3.0.7 | 7.3.1 |
| 3.0.6 | 7.3.0 |

## Changelog

* TODO: Changelog will now be autogenerated by build system. Once 4.0.0 is released, we can delete this entire section.

### 4.0.0-B5

* document/create|update allow document_metadata object passed in, but only use document_metadata.language from it, and set document_metadata.stemmingLanguage and _indexConfig for them (enonic/app-explorer#281)
* Remove _name, displayName and type, rename highlight -> _highlight, id -> _id and score -> _score and add _nodeType to synonym/query
* Add document_metadata.language and document_metadata.stemmingLanguage to SYSTEM_FIELDS
* Add FIELD_DOCUMENT_METADATA_LANGUAGE_INDEX_CONFIG and FIELD_DOCUMENT_METADATA_STEMMING_LANGUAGE_INDEX_CONFIG constants
* Move DEFAULT_INTERFACE_NAME and DEFAULT_INTERFACE to app-explorer
* Field named type is no longer a system field
* Remove displayName and languages and add language to thesaurus model and query
* lib/explorer/api moved to app-explorer
* Add node/semiAtomicUpdate({data, options})
* Add reference(schemaId) to collection model
* Upgrade to lib-graphql:2.0.1
* Add collections, fields, stopWords and synonyms to interface/filter
* Temporarily hardcode interface query and resultMappings and remove facets from search function
* Remove filters, query, resultMappings and type from interface
* Moved from constants to @enonic/js-utils:
  * COLON_SIGN
  * DOT_SIGN
  * ELLIPSIS
  * RT_JSON -> RESPONSE_TYPE_JSON
  * RT_HTML -> RESPONSE_TYPE_HTML
* Removed from constants:
  * EVENT_COLLECTOR_UNREGISTER
  * NT_FIELD_VALUE
  * TOOL_PATH
* Deprecate:
  * collection/unregister()
  * field/getFieldValues()
  * model/2/nodeTypes/fieldValue()
  * nodeTypes/FieldValue
* Change lib-explorer-3 deprecation warnings into thrown errors:
  * collection/register()
  * collection/reschedule()
* Move _nodeType = document from should to must in interface code
* Move should _nodeType filter to must in all queries
* Remove should type filter from all queries
